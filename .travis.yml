language: python

matrix:
  include:
  - os: linux
    dist: xenial
    python: "3.6"
    addons:
      apt:
        packages:
          - libgeos-dev
    before_install:
      - pip install numpy
  - os: linux
    dist: xenial
    python: "3.6"
    before_install:
      - wget http://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh
      - chmod +x miniconda.sh
      - ./miniconda.sh -b -p /home/travis/mc
      - export PATH=/home/travis/mc/bin:$PATH
      - conda update --yes conda
      - conda create -n testenv --yes pip numpy geos pytest pytest-black python=$TRAVIS_PYTHON_VERSION

install:
  - python setup.py build_ext --inplace
  - pip install .[test]

script: pytest
